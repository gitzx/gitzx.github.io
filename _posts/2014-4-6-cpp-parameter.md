---
date: 2014-4-6 21:08:30+00:00
layout: post
title: c++形参的三种传递方式
thread: 46
categories: c++
tags: c++
---

在c语言中，函数的参数和返回值的传递方式由两种：（1）值传递；（2）指针传递；C++语言多了 (3)引用传递。

引用是一种复合类型（指向其他类型定义的类型），在变量前面添加&符合来定义。引用必须用该引用同类型的对象来初始化；不能定义引用类型的引用。

####指针和引用的区别####

(1)引用被创建时必须被初始化；（指针可以在任何时候被初始化；）

(2)不能由NULL引用；（指针可以是NULL）；

(3)一旦引用被初始化，就不能改变引用的关系；（指针可以随时改变所指的对象）。

####const限定符####

(1)const限定符将一个对象转换为一个常量。常量在定义后不能被修改，定义时必须被初始化；

(2)默认情况下，在全局作用域里定义非const变量，在整个程序中都可以访问；在全局作用域里定义const常量时定义该对象的文件的局部变量。

	//file1.cc
	int counter_nonconst;
	const int counter_const1;
	extern const int counter_const2;
	//file2.cc
	extern int counter_nonconst;  //ok
	++counter_nonconst;  //递增定义在file1的变量
	extern counter_const1; //error
	extern counter_const2; //ok
	
###函数的参数传递###

如果形参时非引用类型，则复制实参的值；如果是引用类型，则是实参的别名。

####值传递####

(1)在值传递中，形参表示对应实参的局部副本，对形参的修改仅改变局部副本的值。

(2)在值传递中，具有const形参和非const形参的函数并无区别。(为了兼容c语言)

####指针传递####

(1)若函数的形参是指针，则复制实参指针，形参的任何改变仅作用于局部副本，实参指针的值不变。

(2)在指针传递中，若形参是非const的指针，则函数可以通过指针修改指针所指对象的值，但指针的值不变。

	void reset(int *ip){
		*ip=0;
		ip=0;
	}
	int i=10;
	int *p=&i;
	cout<<*p; //打印10
	reset(p);
	cout<<*p; //打印0; p的值不变
	
(3)在指针传递中，若形参是const的指针，指针所值对象的值和指针的值都不变。

####引用传递####

引用形参直接关联到其所绑定的对象，而非这些对象的副本。使用引用传递可以避免复制实参。

(1)若形参实非const的引用，则可以修改实参的值；

(2)若形参事const引用，则不能通过引用修改过实参。

####复制形参的局限性####

复制形参的局限性如下：

(1)当需要修改实参的值时；

(2)当没有办法实现对象的复制时；

(3)当需要大型对象作为实参传递，复制代价过大时。

此时，可以将形参定义为引用或指针类型。

####含可变形参的函数####

在无法列举出传递函数的所有实参的类型和数目时，可以使用省略符形参：

	void func(parm_list, ...);
	void func(...);



